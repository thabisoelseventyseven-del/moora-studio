<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - Moora Studio</title>
<link rel="stylesheet" href="style.css">

<style>
.admin-card {
    background: #1c1c27;
    padding: 1.2em;
    margin: 1em 0;
    border-radius: 12px;
    color: #fff;
    border: 1px solid #333;
}
.admin-card h3 { color: #ff6ec7; }
textarea { width: 100%; height: 100px; margin-top: 0.7em; }
</style>

</head>
<body>

<header class="header">
    <h1>Admin Panel</h1>
    <p>Reply to user messages</p>
</header>

<section class="dashboard-container">
    <h2>User Messages</h2>
    <div id="adminMessagesContainer"></div>
</section>

<script>
function loadUserMessages(){
    const msgs = JSON.parse(localStorage.getItem("messages") || "[]");
    const container = document.getElementById("adminMessagesContainer");
    container.innerHTML = "";

    msgs.forEach((msg, index) => {
        const div = document.createElement("div");
        div.classList.add("admin-card");
        div.innerHTML = `
            <h3>${msg.user} (${msg.email})</h3>
            <p><strong>Templates:</strong> ${msg.templates.join(" | ")}</p>
            <p>${msg.message}</p>

            <textarea id="reply-${index}" placeholder="Write reply..."></textarea>
            <button class="btn" onclick="sendReply('${msg.email}', ${index})">Send Reply</button>
        `;

        container.appendChild(div);
    });
}

function sendReply(email, index){
    const textarea = document.getElementById(`reply-${index}`);
    const replyText = textarea.value.trim();

    if(!replyText){
        alert("Reply cannot be empty.");
        return;
    }

    const replies = JSON.parse(localStorage.getItem("adminReplies") || "[]");

    replies.push({
        email: email,
        title: "Admin Response",
        message: replyText
    });

    localStorage.setItem("adminReplies", JSON.stringify(replies));
    alert("Reply sent!");

    textarea.value = "";
}

loadUserMessages();
</script>

</body>
</html>
