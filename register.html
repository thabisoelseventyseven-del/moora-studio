<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Register - Moora Studio</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="floating-dots"><span></span><span></span><span></span><span></span><span></span></div>

<div class="top-left-nav">
    <a href="login.html" class="btn small-btn">Login</a>
    <a href="register.html" class="btn small-btn">Register</a>
    <button id="theme-toggle" class="btn small-btn"></button>
</div>

<div class="form-container">
    <h1>Register</h1>
    <p>Create your account to start using our services.</p>
    <div id="errorMessage" style="color:#ff6ec7;"></div>

    <form id="registerForm">
        <input type="text" id="name" placeholder="Full Name" required>
        <input type="email" id="email" placeholder="Email" required>
        <div class="password-wrapper">
            <input type="password" id="password" placeholder="Password" required>
            <span class="toggle-password">👁️</span>
        </div>
        <div class="password-wrapper">
            <input type="password" id="confirmPassword" placeholder="Confirm Password" required>
            <span class="toggle-confirm-password">👁️</span>
        </div>
        <input type="tel" id="phone" placeholder="Phone Number" required>
        <button type="submit" class="btn btn-large">Register</button>
    </form>

    <div class="redirect">
        Already have an account? <a href="login.html">Login here</a>
    </div>
</div>

<script>
// Theme toggle
const themeToggle = document.getElementById("theme-toggle");
const savedTheme = localStorage.getItem("theme") || "dark";
if(savedTheme === "light") {
    document.body.classList.add("light-theme");
    themeToggle.textContent = "🌙";
} else {
    document.body.classList.remove("light-theme");
    themeToggle.textContent = "☀️";
}

themeToggle.addEventListener("click", () => {
    document.body.classList.toggle("light-theme");
    if(document.body.classList.contains("light-theme")){
        themeToggle.textContent = "🌙";
        localStorage.setItem("theme","light");
    } else {
        themeToggle.textContent = "☀️";
        localStorage.setItem("theme","dark");
    }
});

// Toggle password visibility
document.querySelector(".toggle-password").onclick = () => {
    const input = document.getElementById("password");
    input.type = input.type === "password" ? "text" : "password";
};
document.querySelector(".toggle-confirm-password").onclick = () => {
    const input = document.getElementById("confirmPassword");
    input.type = input.type === "password" ? "text" : "password";
};

// Register logic
const registerForm = document.getElementById('registerForm');
registerForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    const phone = document.getElementById('phone').value.trim();

    if(password !== confirmPassword){
        document.getElementById('errorMessage').textContent = "Passwords do not match!";
        return;
    }

    const users = JSON.parse(localStorage.getItem('users') || "[]");

    if(users.some(u => u.email === email)){
        document.getElementById('errorMessage').textContent = "Email already exists!";
        return;
    }

    const newUser = { name, email, phone, password, role: "user" };
    users.push(newUser);
    localStorage.setItem('users', JSON.stringify(users));

    alert("Registration successful! Login now.");
    window.location.href = "login.html";
});
</script>
</body>
</html>
