<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Inbox - Moora Studio</title>
<link rel="stylesheet" href="style.css">
<style>
body{background:#0f0f15;color:#eee;font-family:Arial}
.inbox-container{max-width:900px;margin:30px auto;padding:20px}
.card{background:#1c1c27;border-radius:12px;padding:14px;margin-bottom:12px}
audio{width:100%}
</style>
</head>

<body>

<div class="top-left-nav">
  <a href="dashboard.html" class="btn small-btn">Dashboard</a>
</div>

<h2 style="text-align:center">Inbox</h2>

<div class="inbox-container" id="list"></div>

<script>
const user=JSON.parse(sessionStorage.getItem("user"));
if(!user) location.href="login.html";

const inbox=JSON.parse(localStorage.getItem("inbox")||"[]");
const replies=inbox.filter(m=>m.userEmail===user.email && m.adminReply);
const list=document.getElementById("list");

if(!replies.length){
  list.innerHTML="<p>No admin replies yet.</p>";
}else{
  replies.forEach(m=>{
    const d=document.createElement("div");
    d.className="card";
    d.innerHTML=`
      <b>Admin Reply</b>
      <p>${m.adminReply}</p>
      ${m.adminVoice?`<audio controls src="${m.adminVoice}"></audio>`:""}
      <small>Templates: ${m.templates.join(" | ")}</small>
    `;
    list.appendChild(d);
    m.replyRead=true;
  });
  localStorage.setItem("inbox",JSON.stringify(inbox));
}
</script>

</body>
</html>
